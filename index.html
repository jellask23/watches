<!DOCTYPE html>
<html>

<head>
  <title>Watches</title>
  <style>
    .modal {
      position: fixed;
      z-index: 1;
      display: none;
      justify-content: center;
      align-items: center;
      left: 0;
      top: 0;
      width: 100%;
      /* Full width */
      height: 100%;
      /* Full height */
      background-color: rgb(0, 0, 0);
      /* Fallback color */
      background-color: rgba(0, 0, 0, 0.4);
      /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
      background-color: #fefefe;
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: calc(100% - 8em);
    }

    .display-flex {
      display: flex;
    }

    .permission-btn {
      background-color: #bbb;
      border-radius: 8px;
      padding: 10px 12px;
      border: none;
    }
  </style>
</head>

<body onload="getLocation()">

  <p id="demo"></p>

  <div id="myModal" class="modal">
    <div class="modal-content">
      <div class="display-flex" style="justify-content: center; padding: 12px">
        <div>Website need your location access to improve site functionality. </div>
      </div>
      <hr>
      <div class="display-flex" style="justify-content: end;" onclick="getLocation()">
        <button class="permission-btn">Grant Access</button>
      </div>
    </div>

  </div>
  <script>
    var modal = document.getElementById("myModal");

    function open() {
      modal.style.display = "flex";
    }

    // When the user clicks on <span> (x), close the modal
    function close() {
      modal.style.display = "none";
    }

    var x = document.getElementById("demo");

    var loc = "";

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
        open();
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      var user= navigator.userAgent;
      loc = "Latitude: " + position.coords.latitude +"<br>Longitude: " + position.coords.longitude;

      x.innerHTML = loc+"<br>User: "+user;
      if (loc != "") {
        console.log("enable");
        close();
      }
    }
  </script>


</body>

</html>